<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ankeri.github.io/pytest-respect/api-resources/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Resources - pytest-respect</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Resources";
        var mkdocs_page_input_path = "api-resources.md";
        var mkdocs_page_url = "/pytest-respect/api-resources/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> pytest-respect
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CHANGES/">Changes</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Resources</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources">resources</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.JsonEncoder">JsonEncoder</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.JsonLoader">JsonLoader</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.PathParts">PathParts</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.Defaults">Defaults</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.Defaults.json_encoder">json_encoder</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.Defaults.json_loader">json_loader</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.Defaults.ndigits">ndigits</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.Defaults.path_maker">path_maker</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.PathMaker">PathMaker</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.TestResources">TestResources</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.default">default</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.request">request</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.__init__">__init__</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.add_json_prepper">add_json_prepper</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.data_to_json">data_to_json</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.delete">delete</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.delete_json">delete_json</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.delete_pydantic">delete_pydantic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.delete_pydantic_adapter">delete_pydantic_adapter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.delete_text">delete_text</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.dir">dir</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.expect_json">expect_json</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.expect_pydantic">expect_pydantic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.expect_pydantic_adapter">expect_pydantic_adapter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.expect_text">expect_text</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.list">list</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.load_json">load_json</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.load_pydantic">load_pydantic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.load_pydantic_adapter">load_pydantic_adapter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.load_text">load_text</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.path">path</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_class">pm_class</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_dir">pm_dir</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_dir_named">pm_dir_named</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_file">pm_file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_function">pm_function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_only_class">pm_only_class</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_only_dir">pm_only_dir</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_only_dir_named">pm_only_dir_named</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.pm_only_file">pm_only_file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.save_json">save_json</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.save_pydantic">save_pydantic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.save_pydantic_adapter">save_pydantic_adapter</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pytest_respect.resources.TestResources.save_text">save_text</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.list_dir">list_dir</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.list_resources">list_resources</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.python_compact_json_encoder">python_compact_json_encoder</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.python_json_encoder">python_json_encoder</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.python_json_loader">python_json_loader</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pytest_respect.resources.strip_extensions">strip_extensions</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api-utils/">Utilities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api-ext/">Extensions</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">pytest-respect</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Reference</li>
      <li class="breadcrumb-item active">Resources</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pytest_respectresources"><code>pytest_respect.resources</code></h1>


<div class="doc doc-object doc-module">



<a id="pytest_respect.resources"></a>
    <div class="doc doc-contents first">

        <p>Contains the <code>TestResources</code> class implementing the <code>resources</code> fixture along with various helpers.</p>










<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="pytest_respect.resources.JsonEncoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">JsonEncoder</span> <span class="o">=</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Type for functions to convert data to JSON encoded text.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="pytest_respect.resources.JsonLoader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">JsonLoader</span> <span class="o">=</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Type for functions to convert JSON encoded text to python data.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="pytest_respect.resources.PathParts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">PathParts</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Directory and base file-name for a resource path, returned by PathMakers when locating resources.</p>

    </div>

</div>



<div class="doc doc-object doc-class">



<h2 id="pytest_respect.resources.Defaults" class="doc doc-heading">
            <code>Defaults</code>


</h2>


    <div class="doc doc-contents ">



        <p>Default settings for a TestResources instance. These can be set via <code>resources.default.foo</code> and usually
overridden in individual calls to <code>resources</code> methods.</p>







              <details class="quote">
                <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Defaults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default settings for a TestResources instance. These can be set via `resources.default.foo` and usually</span>
<span class="sd">    overridden in individual calls to `resources` methods.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;How many digits to round floats to by default when comparing JSON data.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">=</span> <span class="n">python_json_encoder</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function used to convert data to JSON encoded text. Defaults to standard python JSON encoding.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">=</span> <span class="n">python_json_loader</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function used to convert JSON encoded text to python data. Defaults to standard python JSON decoding.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">=</span> <span class="n">TestResources</span><span class="o">.</span><span class="n">pm_file</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function used to make paths to resources. Defaults to pm_file making resource paths like</span>
<span class="sd">        ``&lt;dir&gt;/test_file/test_function.&lt;ext&gt;``, or  ``&lt;dir&gt;/test_file/TestClass__test_method.&lt;ext&gt;`` if the test is</span>
<span class="sd">        within a class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ndigits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve ndigits given the default value here and optional override.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_coalesce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ndigits</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">nonable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_json_encoder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonEncoder</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve json_encoder given the default value here and optional override.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_coalesce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_json_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonLoader</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve json_loader given the default value here and optional override.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_coalesce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">json_loader</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_path_maker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathMaker</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve path_maker given the default value here and optional override.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_coalesce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.Defaults.json_encoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">json_encoder</span> <span class="o">=</span> <span class="n">python_json_encoder</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Function used to convert data to JSON encoded text. Defaults to standard python JSON encoding.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.Defaults.json_loader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">json_loader</span> <span class="o">=</span> <span class="n">python_json_loader</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Function used to convert JSON encoded text to python data. Defaults to standard python JSON decoding.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.Defaults.ndigits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ndigits</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>How many digits to round floats to by default when comparing JSON data.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.Defaults.path_maker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">path_maker</span> <span class="o">=</span> <span class="n">TestResources</span><span class="o">.</span><span class="n">pm_file</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Function used to make paths to resources. Defaults to pm_file making resource paths like
<code>&lt;dir&gt;/test_file/test_function.&lt;ext&gt;</code>, or  <code>&lt;dir&gt;/test_file/TestClass__test_method.&lt;ext&gt;</code> if the test is
within a class.</p>

    </div>

</div>






  </div>

    </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="pytest_respect.resources.PathMaker" class="doc doc-heading">
            <code>PathMaker</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Protocol for functions which determine a directory and base file-name from the location of a test function.</p>







              <details class="quote">
                <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PathMaker</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Protocol for functions which determine a directory and base file-name from the location of a test function.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="pytest_respect.resources.TestResources" class="doc doc-heading">
            <code>TestResources</code>


</h2>


    <div class="doc doc-contents ">



        <p>Implements the resources pytest fixture.</p>







              <details class="quote">
                <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TestResources</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements the resources pytest fixture.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__test__</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Don&#39;t try to collect this as a test</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span> <span class="n">accept_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create test resources instance, usually in a function-scoped fixture.</span>

<span class="sd">        Args:</span>
<span class="sd">            request: The pytest fixture request object.</span>
<span class="sd">            ndigits: How many digits to round floats to by default when comparing JSON data and objects which are</span>
<span class="sd">                converted to JSON before comparison. Defaults to no rounding.</span>
<span class="sd">            accept_count: Accept the actual results for this many mismatches before failing the test.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span> <span class="o">=</span> <span class="n">request</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The pytest fixture request that we get context information from.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_accept_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">accept_count</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mimatches remaining before we fail the test.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">:</span> <span class="n">Defaults</span> <span class="o">=</span> <span class="n">Defaults</span><span class="p">()</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default behaviours. They can be optionally overridden in methods that use them.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span> <span class="o">|</span> <span class="n">UnionType</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;JSON Preppers to apply after the global JSON_PREPPERS.&quot;&quot;&quot;</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># Path Makers</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_function</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file, class if present, and function. No contribution is made to the</span>
<span class="sd">        file name.</span>

<span class="sd">        - ``&lt;dir&gt;/test_file__test_function/data.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/test_file__TestClass__test_method/data.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and class if present, and file-name from test method.</span>

<span class="sd">        This is the default method for constructing resource paths.</span>

<span class="sd">        - ``&lt;dir&gt;/test_file/test_function.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/test_file__TestClass/test_method.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span>
        <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">test_name</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_only_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and class if present and contribute nothing to the file-name</span>

<span class="sd">        - ``&lt;dir&gt;/test_file__TestClass/data.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/test_file/data.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span>
        <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_file</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and file-name from test class if present, and test method.</span>

<span class="sd">        - ``&lt;dir&gt;/test_file/test_function.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/test_file/TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">test_name</span>
        <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">file</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_only_file</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and contribute to the file-name.</span>

<span class="sd">        - ``&lt;dir&gt;/test_file/data.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_dir</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to use &quot;resources&quot; for directory and build file-name from test file, test class if present and</span>
<span class="sd">        test function.</span>

<span class="sd">        - ``&lt;dir&gt;/resources/test_file__test_function.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/resources/test_file__TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_maker</span> <span class="o">=</span> <span class="n">TestResources</span><span class="o">.</span><span class="n">pm_dir_named</span><span class="p">(</span><span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path_maker</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathMaker</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PathMaker to use the given name for directory and build file-name from test file, test class if present and</span>
<span class="sd">        test function.</span>

<span class="sd">        - ``&lt;dir&gt;/&lt;dir_name&gt;/test_file__test_function.&lt;ext&gt;``</span>
<span class="sd">        - ``&lt;dir&gt;/&lt;dir_name&gt;/test_file__TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">path_from_dir</span><span class="p">(</span>
            <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
            <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">dir_name</span><span class="p">,</span> <span class="n">file</span>

        <span class="k">return</span> <span class="n">path_from_dir</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_only_dir</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use &quot;resources&quot; for directory and nothing for the file-name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">,</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pm_only_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathMaker</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use the given name for directory nothing for the file-name.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">path_from_dir</span><span class="p">(</span>
            <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
            <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">dir_name</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">path_from_dir</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># Paths</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Directory for resources belonging to the test.</span>

<span class="sd">        Args:</span>
<span class="sd">            path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">                file-name for the resource. The file part will be ignored.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_maker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_path_maker</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="n">test_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
        <span class="n">test_class</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">cls</span>

        <span class="n">dir_path</span><span class="p">,</span> <span class="n">base_name</span> <span class="o">=</span> <span class="n">path_maker</span><span class="p">(</span>
            <span class="n">test_dir</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
            <span class="n">test_file_name</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">test_class_name</span><span class="o">=</span><span class="n">test_class</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">test_class</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">test_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">originalname</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">dir_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Path to a resource file within this test file/class&#39;s directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            parts: Concatenate these parts to the function name, with __ separator to</span>
<span class="sd">                make file-name.</span>
<span class="sd">            ext: Add this extension to the file-name if not already present. Defaults</span>
<span class="sd">                to nothing which can be appropriate if we knot that the last ``part``</span>
<span class="sd">                already has an extension.</span>
<span class="sd">            path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">                file-name for the resource. Defaults to one which uses the test file</span>
<span class="sd">                (and class if present) for the dir and the test function for the file.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_maker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_path_maker</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="n">test_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
        <span class="n">test_class</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">cls</span>

        <span class="n">dir_path</span><span class="p">,</span> <span class="n">base_name</span> <span class="o">=</span> <span class="n">path_maker</span><span class="p">(</span>
            <span class="n">test_dir</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
            <span class="n">test_file_name</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">test_class_name</span><span class="o">=</span><span class="n">test_class</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">test_class</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">test_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">originalname</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">name_parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">base_name</span><span class="p">:</span>
            <span class="n">name_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base_name</span><span class="p">)</span>
        <span class="n">name_parts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">parts</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name_parts</span><span class="p">:</span>
            <span class="c1"># If we have not file-name parts from anywhere, then fall back to &quot;data&quot;</span>
            <span class="n">name_parts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name_parts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">dir_path</span> <span class="o">/</span> <span class="n">name</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># List Resources</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">exclude</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">strip_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List the names of the resources in the folder.</span>

<span class="sd">        Args:</span>
<span class="sd">            include: one or more glob patterns for filenames to include</span>
<span class="sd">            exclude: zero or more glob patterns for filenames to exclude</span>
<span class="sd">            path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">                file-name for the resource. The file part will be ignored.</span>
<span class="sd">        strip_ext: Whether to strip extension from listed resource file names. If</span>
<span class="sd">            True or False then strip all or no extensions from last dot.</span>
<span class="sd">            If string, then strip only that string from the ends of file names. A</span>
<span class="sd">            strip_ext string must include the dot (if wanted) to allow stripping</span>
<span class="sd">            suffixes such as `__bad.json`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_dir</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="n">strip_ext</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a string resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># Text Resources</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a string resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write a string to a resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;write </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="si">}</span><span class="s2"> chars to </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">expect_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">actual</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assert that the actual value matches the content from resource.&quot;&quot;&quot;</span>
        <span class="n">expected_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="n">actual_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="s2">&quot;actual&quot;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">expected_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">expected_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accept_one</span><span class="p">():</span>
                <span class="n">expected_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A new expectation file was written to </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actual_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The expectation file was not found at </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;The actual value has been written to </span><span class="si">{</span><span class="n">actual_path</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

        <span class="n">expected</span> <span class="o">=</span> <span class="n">expected_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The actual value did not match the content of </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;It has been written to </span><span class="si">{</span><span class="n">actual_path</span><span class="si">}</span><span class="s2"> for comparison.&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">actual_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;removing matching actual file&quot;</span><span class="p">,</span> <span class="n">actual_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accept_one</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The expectation file was updated at </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">expected_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
                <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actual_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
                <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_accept_one</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether to accept one more mismatch before failing the test.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accept_count</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accept_count</span> <span class="o">&gt;=</span> <span class="mi">0</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># JSON Resources</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_json_prepper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">UnionType</span><span class="p">,</span> <span class="n">prepper</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a local JSON prepper for a given type, including sub-classes.</span>

<span class="sd">        The prepper can return a few kinds of values:</span>

<span class="sd">        - Simple value: encoded as-is and must be JSON serializable.</span>
<span class="sd">        - Dict: encoded recursively but must have keys that are supported by the json_encoder in use, usually str.</span>
<span class="sd">        - Collection: list, tuple, set, etc will be recursively encoded as a list.</span>

<span class="sd">        It can also raise AbortJsonPrep to skip this prepper and continue trying others.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">type_</span><span class="p">,</span> <span class="n">prepper</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a json resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
            <span class="n">json_loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_json_loader</span><span class="p">(</span><span class="n">json_loader</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">json_loader</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load JSON resource </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">data_to_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert data to a json string used for both expectations and save_json.&quot;&quot;&quot;</span>
        <span class="n">ndigits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_ndigits</span><span class="p">(</span><span class="n">ndigits</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">prepare_for_json_encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span> <span class="n">extra_preppers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="p">)</span>
        <span class="n">json_encoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_json_encoder</span><span class="p">(</span><span class="n">json_encoder</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">json_encoder</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">text</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write JSON data to a resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_to_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">expect_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">actual</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assert that the actual value encodes to the JSON content from resource.&quot;&quot;&quot;</span>
        <span class="n">actual_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_to_json</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expect_text</span><span class="p">(</span>
            <span class="n">actual_text</span><span class="p">,</span>
            <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
            <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
            <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># Pydantic Resources</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_pydantic</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">PMT</span><span class="p">],</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PMT</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a pydantic resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=</span><span class="n">json_loader</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model_class</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_pydantic</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write pydantic data to a resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">actual_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="n">actual_data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_pydantic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">expect_pydantic</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">actual</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assert that the actual value encodes to the JSON content from resource.&quot;&quot;&quot;</span>
        <span class="n">actual_data</span> <span class="o">=</span> <span class="n">actual</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expect_json</span><span class="p">(</span>
            <span class="n">actual_data</span><span class="p">,</span>
            <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
            <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
            <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
            <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span>
            <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
    <span class="c1"># Pydantic TypeAdapter Resources</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_pydantic_adapter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">],</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a resource with a pydantic TypeAdapter relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=</span><span class="n">json_loader</span><span class="p">)</span>
        <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">adapter</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_pydantic_adapter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write pydantic data to a resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">type_</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
        <span class="n">actual_data</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">dump_python</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="n">actual_data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_pydantic_adapter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">expect_pydantic_adapter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">actual</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assert that the type adapter encodes the actual value to the JSON content from resource. This allows us to</span>
<span class="sd">        pass a context to the serializers of any objects embedded within actual.&quot;&quot;&quot;</span>
        <span class="n">type_</span> <span class="o">=</span> <span class="n">type_</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
        <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
        <span class="n">actual_data</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">dump_python</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expect_json</span><span class="p">(</span>
            <span class="n">actual_data</span><span class="p">,</span>
            <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
            <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
            <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
            <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span>
            <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.TestResources.default" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">default</span> <span class="o">=</span> <span class="n">Defaults</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Default behaviours. They can be optionally overridden in methods that use them.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pytest_respect.resources.TestResources.request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">request</span> <span class="o">=</span> <span class="n">request</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The pytest fixture request that we get context information from.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">accept_count</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create test resources instance, usually in a function-scoped fixture.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><span title="pytest.FixtureRequest">FixtureRequest</span></code>)
              
              <div class="doc-md-description">
                <p>The pytest fixture request object.</p>
              </div>
            </li>
            <li>
              <b><code>ndigits</code></b>
              
              <div class="doc-md-description">
                <p>How many digits to round floats to by default when comparing JSON data and objects which are
converted to JSON before comparison. Defaults to no rounding.</p>
              </div>
            </li>
            <li>
              <b><code>accept_count</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>0</code>
)
              
              <div class="doc-md-description">
                <p>Accept the actual results for this many mismatches before failing the test.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span><span class="p">,</span> <span class="n">accept_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create test resources instance, usually in a function-scoped fixture.</span>

<span class="sd">    Args:</span>
<span class="sd">        request: The pytest fixture request object.</span>
<span class="sd">        ndigits: How many digits to round floats to by default when comparing JSON data and objects which are</span>
<span class="sd">            converted to JSON before comparison. Defaults to no rounding.</span>
<span class="sd">        accept_count: Accept the actual results for this many mismatches before failing the test.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">:</span> <span class="n">FixtureRequest</span> <span class="o">=</span> <span class="n">request</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The pytest fixture request that we get context information from.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_accept_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">accept_count</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mimatches remaining before we fail the test.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">:</span> <span class="n">Defaults</span> <span class="o">=</span> <span class="n">Defaults</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default behaviours. They can be optionally overridden in methods that use them.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span> <span class="o">|</span> <span class="n">UnionType</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;JSON Preppers to apply after the global JSON_PREPPERS.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.add_json_prepper" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_json_prepper</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">prepper</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Register a local JSON prepper for a given type, including sub-classes.</p>
<p>The prepper can return a few kinds of values:</p>
<ul>
<li>Simple value: encoded as-is and must be JSON serializable.</li>
<li>Dict: encoded recursively but must have keys that are supported by the json_encoder in use, usually str.</li>
<li>Collection: list, tuple, set, etc will be recursively encoded as a list.</li>
</ul>
<p>It can also raise AbortJsonPrep to skip this prepper and continue trying others.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_json_prepper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="n">UnionType</span><span class="p">,</span> <span class="n">prepper</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a local JSON prepper for a given type, including sub-classes.</span>

<span class="sd">    The prepper can return a few kinds of values:</span>

<span class="sd">    - Simple value: encoded as-is and must be JSON serializable.</span>
<span class="sd">    - Dict: encoded recursively but must have keys that are supported by the json_encoder in use, usually str.</span>
<span class="sd">    - Collection: list, tuple, set, etc will be recursively encoded as a list.</span>

<span class="sd">    It can also raise AbortJsonPrep to skip this prepper and continue trying others.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">type_</span><span class="p">,</span> <span class="n">prepper</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.data_to_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">data_to_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Convert data to a json string used for both expectations and save_json.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">data_to_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert data to a json string used for both expectations and save_json.&quot;&quot;&quot;</span>
    <span class="n">ndigits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_ndigits</span><span class="p">(</span><span class="n">ndigits</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">prepare_for_json_encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span> <span class="n">extra_preppers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_extra_preppers</span><span class="p">)</span>
    <span class="n">json_encoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_json_encoder</span><span class="p">(</span><span class="n">json_encoder</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">json_encoder</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Delete a string resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a string resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.delete_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Delete a json resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.delete_pydantic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_pydantic</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Delete a json resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_pydantic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.delete_pydantic_adapter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_pydantic_adapter</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Delete a json resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_pydantic_adapter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.delete_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_text</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;txt&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Delete a json resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete a json resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.dir" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">dir</span><span class="p">(</span><span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Directory for resources belonging to the test.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>path_maker</code></b>
                  (<code><a class="autorefs autorefs-internal" title="PathMaker (pytest_respect.resources.PathMaker)" href="#pytest_respect.resources.PathMaker">PathMaker</a> | None</code>, default:
                      <code>None</code>
)
              
              <div class="doc-md-description">
                <p>Function to turn test co-ordinates into a directory and partial
file-name for the resource. The file part will be ignored.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Directory for resources belonging to the test.</span>

<span class="sd">    Args:</span>
<span class="sd">        path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">            file-name for the resource. The file part will be ignored.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path_maker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_path_maker</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="n">test_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
    <span class="n">test_class</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">cls</span>

    <span class="n">dir_path</span><span class="p">,</span> <span class="n">base_name</span> <span class="o">=</span> <span class="n">path_maker</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">test_class_name</span><span class="o">=</span><span class="n">test_class</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">test_class</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">originalname</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">dir_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.expect_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expect_json</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Assert that the actual value encodes to the JSON content from resource.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">expect_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">actual</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that the actual value encodes to the JSON content from resource.&quot;&quot;&quot;</span>
    <span class="n">actual_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_to_json</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expect_text</span><span class="p">(</span>
        <span class="n">actual_text</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.expect_pydantic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expect_pydantic</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Assert that the actual value encodes to the JSON content from resource.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">expect_pydantic</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">actual</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that the actual value encodes to the JSON content from resource.&quot;&quot;&quot;</span>
    <span class="n">actual_data</span> <span class="o">=</span> <span class="n">actual</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expect_json</span><span class="p">(</span>
        <span class="n">actual_data</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.expect_pydantic_adapter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expect_pydantic_adapter</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Assert that the type adapter encodes the actual value to the JSON content from resource. This allows us to
pass a context to the serializers of any objects embedded within actual.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">expect_pydantic_adapter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">actual</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that the type adapter encodes the actual value to the JSON content from resource. This allows us to</span>
<span class="sd">    pass a context to the serializers of any objects embedded within actual.&quot;&quot;&quot;</span>
    <span class="n">type_</span> <span class="o">=</span> <span class="n">type_</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
    <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
    <span class="n">actual_data</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">dump_python</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expect_json</span><span class="p">(</span>
        <span class="n">actual_data</span><span class="p">,</span>
        <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
        <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span>
        <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span>
        <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span>
        <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.expect_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">expect_text</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;txt&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Assert that the actual value matches the content from resource.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">expect_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">actual</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assert that the actual value matches the content from resource.&quot;&quot;&quot;</span>
    <span class="n">expected_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="n">actual_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="s2">&quot;actual&quot;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">expected_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">expected_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accept_one</span><span class="p">():</span>
            <span class="n">expected_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A new expectation file was written to </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actual_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The expectation file was not found at </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;The actual value has been written to </span><span class="si">{</span><span class="n">actual_path</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

    <span class="n">expected</span> <span class="o">=</span> <span class="n">expected_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The actual value did not match the content of </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;It has been written to </span><span class="si">{</span><span class="n">actual_path</span><span class="si">}</span><span class="s2"> for comparison.&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">actual_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;removing matching actual file&quot;</span><span class="p">,</span> <span class="n">actual_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accept_one</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The expectation file was updated at </span><span class="si">{</span><span class="n">expected_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">expected_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
            <span class="n">actual_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actual_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
            <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.list" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">list</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>List the names of the resources in the folder.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>include</code></b>
                  (<code><span title="str">str</span> | <span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>]</code>, default:
                      <code>&#39;*&#39;</code>
)
              
              <div class="doc-md-description">
                <p>one or more glob patterns for filenames to include</p>
              </div>
            </li>
            <li>
              <b><code>exclude</code></b>
                  (<code><span title="str">str</span> | <span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>]</code>, default:
                      <code><span title="tuple">tuple</span>()</code>
)
              
              <div class="doc-md-description">
                <p>zero or more glob patterns for filenames to exclude</p>
              </div>
            </li>
            <li>
              <b><code>path_maker</code></b>
                  (<code><a class="autorefs autorefs-internal" title="PathMaker (pytest_respect.resources.PathMaker)" href="#pytest_respect.resources.PathMaker">PathMaker</a> | None</code>, default:
                      <code>None</code>
)
              
              <div class="doc-md-description">
                <p>Function to turn test co-ordinates into a directory and partial
file-name for the resource. The file part will be ignored.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>strip_ext: Whether to strip extension from listed resource file names. If
    True or False then strip all or no extensions from last dot.
    If string, then strip only that string from the ends of file names. A
    strip_ext string must include the dot (if wanted) to allow stripping
    suffixes such as <code>__bad.json</code></p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">include</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">strip_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List the names of the resources in the folder.</span>

<span class="sd">    Args:</span>
<span class="sd">        include: one or more glob patterns for filenames to include</span>
<span class="sd">        exclude: zero or more glob patterns for filenames to exclude</span>
<span class="sd">        path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">            file-name for the resource. The file part will be ignored.</span>
<span class="sd">    strip_ext: Whether to strip extension from listed resource file names. If</span>
<span class="sd">        True or False then strip all or no extensions from last dot.</span>
<span class="sd">        If string, then strip only that string from the ends of file names. A</span>
<span class="sd">        strip_ext string must include the dot (if wanted) to allow stripping</span>
<span class="sd">        suffixes such as `__bad.json`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">list_dir</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="n">strip_ext</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.load_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a json resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a json resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">json_loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_json_loader</span><span class="p">(</span><span class="n">json_loader</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json_loader</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load JSON resource </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.load_pydantic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_pydantic</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a pydantic resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_pydantic</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">PMT</span><span class="p">],</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PMT</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a pydantic resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=</span><span class="n">json_loader</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model_class</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.load_pydantic_adapter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_pydantic_adapter</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a resource with a pydantic TypeAdapter relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_pydantic_adapter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">],</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_loader</span><span class="p">:</span> <span class="n">JsonLoader</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a resource with a pydantic TypeAdapter relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_loader</span><span class="o">=</span><span class="n">json_loader</span><span class="p">)</span>
    <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">adapter</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.load_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_text</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;txt&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Load a string resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a string resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Path to a resource file within this test file/class's directory.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>parts</code></b>
                  (<code><span title="typing.Any">Any</span></code>, default:
                      <code>()</code>
)
              
              <div class="doc-md-description">
                <p>Concatenate these parts to the function name, with __ separator to
make file-name.</p>
              </div>
            </li>
            <li>
              <b><code>ext</code></b>
                  (<code><span title="str">str</span> | None</code>, default:
                      <code>None</code>
)
              
              <div class="doc-md-description">
                <p>Add this extension to the file-name if not already present. Defaults
to nothing which can be appropriate if we knot that the last <code>part</code>
already has an extension.</p>
              </div>
            </li>
            <li>
              <b><code>path_maker</code></b>
                  (<code><a class="autorefs autorefs-internal" title="PathMaker (pytest_respect.resources.PathMaker)" href="#pytest_respect.resources.PathMaker">PathMaker</a> | None</code>, default:
                      <code>None</code>
)
              
              <div class="doc-md-description">
                <p>Function to turn test co-ordinates into a directory and partial
file-name for the resource. Defaults to one which uses the test file
(and class if present) for the dir and the test function for the file.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Path to a resource file within this test file/class&#39;s directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        parts: Concatenate these parts to the function name, with __ separator to</span>
<span class="sd">            make file-name.</span>
<span class="sd">        ext: Add this extension to the file-name if not already present. Defaults</span>
<span class="sd">            to nothing which can be appropriate if we knot that the last ``part``</span>
<span class="sd">            already has an extension.</span>
<span class="sd">        path_maker: Function to turn test co-ordinates into a directory and partial</span>
<span class="sd">            file-name for the resource. Defaults to one which uses the test file</span>
<span class="sd">            (and class if present) for the dir and the test function for the file.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path_maker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">_path_maker</span><span class="p">(</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="n">test_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">fspath</span><span class="p">)</span>
    <span class="n">test_class</span><span class="p">:</span> <span class="nb">type</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">cls</span>

    <span class="n">dir_path</span><span class="p">,</span> <span class="n">base_name</span> <span class="o">=</span> <span class="n">path_maker</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">test_class_name</span><span class="o">=</span><span class="n">test_class</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">if</span> <span class="n">test_class</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">originalname</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">name_parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">base_name</span><span class="p">:</span>
        <span class="n">name_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base_name</span><span class="p">)</span>
    <span class="n">name_parts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">parts</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name_parts</span><span class="p">:</span>
        <span class="c1"># If we have not file-name parts from anywhere, then fall back to &quot;data&quot;</span>
        <span class="n">name_parts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name_parts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ext</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">dir_path</span> <span class="o">/</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_class" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to build directory from test_file and class if present, and file-name from test method.</p>
<p>This is the default method for constructing resource paths.</p>
<ul>
<li><code>&lt;dir&gt;/test_file/test_function.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/test_file__TestClass/test_method.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and class if present, and file-name from test method.</span>

<span class="sd">    This is the default method for constructing resource paths.</span>

<span class="sd">    - ``&lt;dir&gt;/test_file/test_function.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/test_file__TestClass/test_method.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span>
    <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">test_name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_dir" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_dir</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to use "resources" for directory and build file-name from test file, test class if present and
test function.</p>
<ul>
<li><code>&lt;dir&gt;/resources/test_file__test_function.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/resources/test_file__TestClass__test_method.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_dir</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to use &quot;resources&quot; for directory and build file-name from test file, test class if present and</span>
<span class="sd">    test function.</span>

<span class="sd">    - ``&lt;dir&gt;/resources/test_file__test_function.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/resources/test_file__TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path_maker</span> <span class="o">=</span> <span class="n">TestResources</span><span class="o">.</span><span class="n">pm_dir_named</span><span class="p">(</span><span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">path_maker</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_dir_named" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="o">=</span><span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to use the given name for directory and build file-name from test file, test class if present and
test function.</p>
<ul>
<li><code>&lt;dir&gt;/&lt;dir_name&gt;/test_file__test_function.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/&lt;dir_name&gt;/test_file__TestClass__test_method.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathMaker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to use the given name for directory and build file-name from test file, test class if present and</span>
<span class="sd">    test function.</span>

<span class="sd">    - ``&lt;dir&gt;/&lt;dir_name&gt;/test_file__test_function.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/&lt;dir_name&gt;/test_file__TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">path_from_dir</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">dir_name</span><span class="p">,</span> <span class="n">file</span>

    <span class="k">return</span> <span class="n">path_from_dir</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_file</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to build directory from test_file and file-name from test class if present, and test method.</p>
<ul>
<li><code>&lt;dir&gt;/test_file/test_function.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/test_file/TestClass__test_method.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_file</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and file-name from test class if present, and test method.</span>

<span class="sd">    - ``&lt;dir&gt;/test_file/test_function.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/test_file/TestClass__test_method.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">test_name</span>
    <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">file</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_function" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_function</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to build directory from test_file, class if present, and function. No contribution is made to the
file name.</p>
<ul>
<li><code>&lt;dir&gt;/test_file__test_function/data.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/test_file__TestClass__test_method/data.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_function</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file, class if present, and function. No contribution is made to the</span>
<span class="sd">    file name.</span>

<span class="sd">    - ``&lt;dir&gt;/test_file__test_function/data.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/test_file__TestClass__test_method/data.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_only_class" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_only_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">,</span> <span class="n">test_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to build directory from test_file and class if present and contribute nothing to the file-name</p>
<ul>
<li><code>&lt;dir&gt;/test_file__TestClass/data.&lt;ext&gt;</code></li>
<li><code>&lt;dir&gt;/test_file/data.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_only_class</span><span class="p">(</span><span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and class if present and contribute nothing to the file-name</span>

<span class="sd">    - ``&lt;dir&gt;/test_file__TestClass/data.&lt;ext&gt;``</span>
<span class="sd">    - ``&lt;dir&gt;/test_file/data.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">test_class_name</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_file_name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">test_class_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span>
    <span class="k">return</span> <span class="nb">dir</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_only_dir" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_only_dir</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Use "resources" for directory and nothing for the file-name.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_only_dir</span><span class="p">(</span>
    <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use &quot;resources&quot; for directory and nothing for the file-name.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_only_dir_named" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_only_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="o">=</span><span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Use the given name for directory nothing for the file-name.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_only_dir_named</span><span class="p">(</span><span class="n">dir_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_RESOURCES_DIR</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathMaker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use the given name for directory nothing for the file-name.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">path_from_dir</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathParts</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">dir_name</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">path_from_dir</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.pm_only_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pm_only_file</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="n">test_class_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">test_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>PathMaker to build directory from test_file and contribute to the file-name.</p>
<ul>
<li><code>&lt;dir&gt;/test_file/data.&lt;ext&gt;</code></li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pm_only_file</span><span class="p">(</span>
    <span class="n">test_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">test_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">test_class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">test_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PathMaker to build directory from test_file and contribute to the file-name.</span>

<span class="sd">    - ``&lt;dir&gt;/test_file/data.&lt;ext&gt;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">test_dir</span> <span class="o">/</span> <span class="n">test_file_name</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.save_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Write JSON data to a resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write JSON data to a resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_to_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.save_pydantic" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_pydantic</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Write pydantic data to a resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_pydantic</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write pydantic data to a resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">actual_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="n">actual_data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.save_pydantic_adapter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_pydantic_adapter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=...</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=...</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Write pydantic data to a resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_pydantic_adapter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">json_encoder</span><span class="p">:</span> <span class="n">JsonEncoder</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">ndigits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">EllipsisType</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">type_</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write pydantic data to a resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">type_</span> <span class="o">=</span> <span class="n">type_</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">adapter</span><span class="p">:</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">type_</span><span class="p">)</span>
    <span class="n">actual_data</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">dump_python</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_json</span><span class="p">(</span><span class="n">actual_data</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">,</span> <span class="n">json_encoder</span><span class="o">=</span><span class="n">json_encoder</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytest_respect.resources.TestResources.save_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;txt&#39;</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Write a string to a resource relative to the current test.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="n">parts</span><span class="p">,</span>
    <span class="n">ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;txt&quot;</span><span class="p">,</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write a string to a resource relative to the current test.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="o">*</span><span class="n">parts</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="n">ext</span><span class="p">,</span> <span class="n">path_maker</span><span class="o">=</span><span class="n">path_maker</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;write </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="si">}</span><span class="s2"> chars to </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>


</div>


<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.list_dir" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_dir</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">strip_ext</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>List the names of the files in the directory, including and excluding globs.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_dir</span><span class="p">(</span>
    <span class="nb">dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">include</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
    <span class="n">strip_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List the names of the files in the directory, including and excluding globs.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">include</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">include</span> <span class="o">=</span> <span class="p">[</span><span class="n">include</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exclude</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="n">exclude</span><span class="p">]</span>

    <span class="n">names</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">inc</span> <span class="ow">in</span> <span class="n">include</span><span class="p">:</span>
        <span class="n">names</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">inc</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">exc</span><span class="p">)}</span>
    <span class="n">name_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
    <span class="n">name_list</span> <span class="o">=</span> <span class="n">strip_extensions</span><span class="p">(</span><span class="n">name_list</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="n">strip_ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.list_resources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">list_resources</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(),</span> <span class="n">path_maker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Static version of TestResources.list method which can be used for parametric tests.</p>
<p>This version does not have access to a FixtureRequest object so we use the directory of the calling module instead.
We have no test class or test function to pass to the path_maker and we use only the directory from its return
value.</p>
<p>Parametric Test Example:</p>
<pre><code>@pytest.mark.parametrize("curve_name", list_resources("power_curve_*.json")
def test_power_curve(resources, curve_name):
   curve = resources.load_pydantic(PowerCurve, curve_name)
   assert len(curve.points) &gt;= 2
</code></pre>
<p>Parametric Fixture Example:</p>
<pre><code>@pytest.fixture(params=list_resources("power_curve_*.json", exclude=["*__actual*"], strip_ext=".json"))
def each_power_curve(request, resources) -&gt; PowerCurve:
   return resources.load_pydantic(PowerCurve, request.param)
</code></pre>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>include</code></b>
                  (<code><span title="str">str</span> | <span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>]</code>, default:
                      <code>&#39;*&#39;</code>
)
              
              <div class="doc-md-description">
                <p>one or more glob patterns for filenames to include</p>
              </div>
            </li>
            <li>
              <b><code>exclude</code></b>
                  (<code><span title="str">str</span> | <span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>]</code>, default:
                      <code><span title="tuple">tuple</span>()</code>
)
              
              <div class="doc-md-description">
                <p>zero or more glob patterns for filenames to exclude</p>
              </div>
            </li>
            <li>
              <b><code>path_maker</code></b>
                  (<code><a class="autorefs autorefs-internal" title="PathMaker (pytest_respect.resources.PathMaker)" href="#pytest_respect.resources.PathMaker">PathMaker</a> | None</code>, default:
                      <code>None</code>
)
              
              <div class="doc-md-description">
                <p>Function to turn test co-ordinates into a directory to look for
resources in. The default uses the test file name for the directory.</p>
              </div>
            </li>
            <li>
              <b><code>strip_ext</code></b>
                  (<code><span title="str">str</span> | <span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              
              <div class="doc-md-description">
                <p>Whether to strip extension from listed resource file names. If
True or False then strip all or no extensions from last dot.
If string, then strip only that string from the ends of file names. A
strip_ext string must include the dot (if wanted) to allow stripping
suffixes such as <code>__bad.json</code></p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">list_resources</span><span class="p">(</span>
    <span class="n">include</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
    <span class="n">path_maker</span><span class="p">:</span> <span class="n">PathMaker</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">strip_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">builtins</span><span class="o">.</span><span class="n">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Static version of TestResources.list method which can be used for parametric tests.</span>

<span class="sd">    This version does not have access to a FixtureRequest object so we use the directory of the calling module instead.</span>
<span class="sd">    We have no test class or test function to pass to the path_maker and we use only the directory from its return</span>
<span class="sd">    value.</span>

<span class="sd">    Parametric Test Example:</span>

<span class="sd">        @pytest.mark.parametrize(&quot;curve_name&quot;, list_resources(&quot;power_curve_*.json&quot;)</span>
<span class="sd">        def test_power_curve(resources, curve_name):</span>
<span class="sd">           curve = resources.load_pydantic(PowerCurve, curve_name)</span>
<span class="sd">           assert len(curve.points) &gt;= 2</span>

<span class="sd">    Parametric Fixture Example:</span>

<span class="sd">        @pytest.fixture(params=list_resources(&quot;power_curve_*.json&quot;, exclude=[&quot;*__actual*&quot;], strip_ext=&quot;.json&quot;))</span>
<span class="sd">        def each_power_curve(request, resources) -&gt; PowerCurve:</span>
<span class="sd">           return resources.load_pydantic(PowerCurve, request.param)</span>

<span class="sd">    Args:</span>
<span class="sd">        include: one or more glob patterns for filenames to include</span>
<span class="sd">        exclude: zero or more glob patterns for filenames to exclude</span>
<span class="sd">        path_maker: Function to turn test co-ordinates into a directory to look for</span>
<span class="sd">            resources in. The default uses the test file name for the directory.</span>
<span class="sd">        strip_ext: Whether to strip extension from listed resource file names. If</span>
<span class="sd">            True or False then strip all or no extensions from last dot.</span>
<span class="sd">            If string, then strip only that string from the ends of file names. A</span>
<span class="sd">            strip_ext string must include the dot (if wanted) to allow stripping</span>
<span class="sd">            suffixes such as `__bad.json`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path_maker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">path_maker</span> <span class="o">=</span> <span class="n">TestResources</span><span class="o">.</span><span class="n">pm_only_file</span>

    <span class="n">calling_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">stack</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">test_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">calling_frame</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">dir_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">path_maker</span><span class="p">(</span>
        <span class="n">test_dir</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">test_file_name</span><span class="o">=</span><span class="n">test_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">test_class_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">test_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">resources</span> <span class="o">=</span> <span class="n">list_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="n">strip_extensions</span><span class="p">(</span><span class="n">resources</span><span class="p">,</span> <span class="n">strip_ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resources</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.python_compact_json_encoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">python_compact_json_encoder</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Standard JSON encoder in very compact mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">python_compact_json_encoder</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard JSON encoder in very compact mode.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.python_json_encoder" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">python_json_encoder</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Standard JSON encoder in very verbose mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">python_json_encoder</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard JSON encoder in very verbose mode.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.python_json_loader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">python_json_loader</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Standard JSON loader.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">python_json_loader</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard JSON loader.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="pytest_respect.resources.strip_extensions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">strip_extensions</span><span class="p">(</span><span class="n">resources</span><span class="p">,</span> <span class="n">strip_ext</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Strip file extensions from a list of resources, depending on strip_ext.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>resources</code></b>
                  (<code><span title="collections.abc.Iterable">Iterable</span>[<span title="str">str</span>]</code>)
              
              <div class="doc-md-description">
                <p>list of resources to maybe strip extensions from.</p>
              </div>
            </li>
            <li>
              <b><code>strip_ext</code></b>
                  (<code><span title="str">str</span> | <span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              
              <div class="doc-md-description">
                <p>Whether to strip extension from listed resource file names. If
True or False then strip all or no extensions from last dot.
If string, then strip only that string from the ends of file names. A
strip_ext string must include the dot (if wanted) to allow stripping
suffixes such as <code>__bad.json</code></p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
              
              <div class="doc-md-description">
                <p>The original resources or a copy with extensions stripped.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/pytest_respect/resources.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">strip_extensions</span><span class="p">(</span>
    <span class="n">resources</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">strip_ext</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Strip file extensions from a list of resources, depending on strip_ext.</span>

<span class="sd">    Args:</span>
<span class="sd">        resources: list of resources to maybe strip extensions from.</span>
<span class="sd">        strip_ext: Whether to strip extension from listed resource file names. If</span>
<span class="sd">            True or False then strip all or no extensions from last dot.</span>
<span class="sd">            If string, then strip only that string from the ends of file names. A</span>
<span class="sd">            strip_ext string must include the dot (if wanted) to allow stripping</span>
<span class="sd">            suffixes such as `__bad.json`</span>

<span class="sd">    Returns:</span>
<span class="sd">        The original resources or a copy with extensions stripped.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">strip_ext</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strip_ext</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">strip_ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">]</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strip_ext</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">resources</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resources</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../CHANGES/" class="btn btn-neutral float-left" title="Changes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../api-utils/" class="btn btn-neutral float-right" title="Utilities">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../CHANGES/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../api-utils/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
